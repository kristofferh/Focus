/**
 * Focus Tumblr Theme.
 */// Namespace
var Focus=window.Focus||{};(function(e,t,n){var r=function(t,n){if(!(this instanceof r))return new r(t,n);this.els=e(t);this.target=e(n);this.els.on("click",e.proxy(this.__setDisplayType,this))};r.prototype={__setDisplayType:function(t){t.preventDefault();var n=e(t.currentTarget),r=n.data("type");r==="grid"&&!n.hasClass("active")?this.setGrid():r==="list"&&!n.hasClass("active")&&this.setList();this.els.removeClass("active");n.toggleClass("active")},setGrid:function(){this.target.removeClass("list").addClass("grid")},setList:function(){this.target.removeClass("grid").addClass("list")}};t.GridToggler=r})(jQuery,Focus);(function(e,t,n){var r=function(t,n){if(!(this instanceof r))return new r(t,n);this.els=e(t);this.inner=this.els.find("span");this.target=e(n);this.els.on("click","span",e.proxy(function(e){if(this.els.hasClass("open")){this.els.removeClass("open");this.inner.html("+");this.target.removeClass("open")}else{this.els.addClass("open");this.inner.html("-");this.target.addClass("open")}},this))};t.PanelToggler=r})(jQuery,Focus);(function(e,t,n){var r=function(t,n){if(this instanceof r){this.el=typeof t=="string"?e(t).get(0):t;this.$el=e(t);this.options=n;this.metadata=this.$el.data("plugin-options");this.config=e.extend({},r.defaults,this.options,this.metadata);this.loadingData=!1;this.$doc=e(document);this.$el.on("scroll",e.proxy(this._debounce(function(){this._nearBottom()&&!this.loadingData&&this.nextPage()},this.config.scrollDelay),this));this.config.pagination.addClass("visuallyhidden");var i=window.matchMedia("(max-width: 600px)"),s=window.matchMedia("(min-width: 601px)");i.addListener(function(){e(".type li.grid").removeClass("active");e(".type li.list").addClass("active");e(".type li").hide();e("#posts").removeClass("grid")});s.addListener(function(){e(".type li").show()});r.register(this);return this}return new r(t,n)};r.prototype={_debounce:function(t,n){var r=null;return function(){clearTimeout(r);r=setTimeout(e.proxy(function(){t.apply(this)},this),n)}},_nearBottom:function(){var e=0+this.$doc.height()-this.$el.height()-this.$el.scrollTop(),t=this.$doc.height()-this.config.pagination.offset().top;return e-this.config.bufferPx<t},nextPage:function(){this.config.loader.addClass("active");this.loadingData=!0;var t=e.ajax({url:"index2.html",dataType:"html"});t.done(e.proxy(function(t){this.loadingData=!1;setTimeout(e.proxy(function(){this.config.loader.removeClass("active")},this),500);var n=e(t).find("#posts").children();n.each(e.proxy(function(e,t){this.config.target.append(t)},this))},this))}};r.instances=[];r.defaults={bufferPx:250,pagination:e("#pagination"),loader:e(".loader"),scrollDelay:50,target:e("#posts")};r.register=function(e){this.instances.push(e)};e.fn.pager=function(e){return this.each(function(){new r(this,e)})};t.Pager=r})(jQuery,Focus);jQuery(function(){Focus.GridToggler(".type li","#posts");Focus.PanelToggler(".expand-panel","#main-content");Focus.Pager(window)});